<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>I Ching</title>
    <style>
        img {
            background-color: black;
            display: block;
            height: 30px;
            margin: auto;
            width: 90px;
            position: relative;
        }

        .margin {
            margin-top: 200px;
        }

        .coins {
            border: 1px solid black;
            width: 102px;
        }

        .next {
            border: 1px solid transparent;
            height: 30px;
            width: 100px;
        }

        .flip {
            animation-direction: alternate;
            animation-duration: .2s;
            animation-iteration-count: 10;
            animation-name: flip;
        }

        .move {
            animation-duration: 2s;
            animation-fill-mode: both;
            animation-name: move;
        }

        .all {
            animation-direction: alternate, normal, normal;
            animation-duration: .2s, 2s, 2s;
            animation-iteration-count: 10, 1, 1;
            animation-fill-mode: none, both, both;
        }

        .r1.all {
            animation-name: flip, grow, move-r1;
        }

        .r2.all {
            animation-name: flip, grow, move-r2;
        }

        .r3.all {
            animation-name: flip, grow, move-r3;
        }

        .r4.all {
            animation-name: flip, grow, move-r4;
        }

        .r5.all {
            animation-name: flip, grow, move-r5;
        }

        .r6.all {
            animation-name: flip, grow, move-r6;
        }

        @keyframes flip {
            from {
                transform: scaleY(1);
            }

            to {
                transform: scaleY(-1);
            }
        }

        @keyframes grow {
            from {
                height: 30px;
                width: 90px;
            }

            to {
                height: 90px;
                width: 270px;
            }
        }

        @keyframes move-r1 {
            from {
                left: 0px;
                top: 0px;
            }

            to {
                left: 120px;
                top: -150px;
            }
        }

        @keyframes move-r2 {
            from {
                left: 0px;
                top: 0px;
            }

            to {
                left: 120px;
                top: -90px;
            }
        }

        @keyframes move-r3 {
            from {
                left: 0px;
                top: 0px;
            }

            to {
                left: 120px;
                top: -30px;
            }
        }

        @keyframes move-r4 {
            from {
                left: 0px;
                top: 0px;
            }

            to {
                left: 120px;
                top: 30px;
            }
        }

        @keyframes move-r5 {
            from {
                left: 0px;
                top: 0px;
            }

            to {
                left: 120px;
                top: 90px;
            }
        }

        @keyframes move-r6 {
            from {
                left: 0px;
                top: 0px;
            }

            to {
                left: 120px;
                top: 150px;
            }
        }
    </style>
    <script>
        function getImages() {
            const array = Array.from(document.getElementsByTagName('img'));
            return array;
        }

        function doit(className) {
            for (let el of getImages()) {
                el.className += ' ' + className;
            }
        }

        function onAnimationEnd(event) {
            console.log(event);
        }
    </script>
</head>

<body>
    <div class="margin">
        <div class="coins">
            <div class="next">
                <img id="r1" class="r1" src="Box Measurements.svg" />
            </div>
            <div class="next">
                <img id="r2" class="r2" src="Box Measurements.svg" />
            </div>
            <div class="next">
                <img id="r3" class="r3" src="Box Measurements.svg" />
            </div>
            <div class="next">
                <img id="r4" class="r4" src="Box Measurements.svg" />
            </div>
            <div class="next">
                <img id="r5" class="r5" src="Box Measurements.svg" />
            </div>
            <div class="next">
                <img id="r6" class="r6" src="Box Measurements.svg" />
            </div>
        </div>
        <div><button id="flip">Flip</button></div>
        <div><button id="move">Move</button></div>
        <div><button id="all">Both</button></div>
    </div>
    <script>
        for (let el of getImages()) {
            el.addEventListener('animationend', onAnimationEnd);
        }
        for (let s of ['flip', 'move', 'all']) {
            document.getElementById(s).addEventListener('click', () => doit(s));
        }
    </script>
</body>
</html>
